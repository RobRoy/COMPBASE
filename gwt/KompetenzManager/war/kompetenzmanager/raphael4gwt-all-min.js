(function(){var a=function(h,g,f){if(typeof(f)=="string"){f=g.path(f).attr({stroke:"none"})}for(var c=0;c<h.length;c++){var e=h[c];var d=f.getPointAtLength(e.getBBox().x);var b=e.transform()+"T"+(d.x-e.getBBox().x)+","+(d.y-e.getBBox().y-e.getBBox().height);b+="R"+(d.alpha<360?180+d.alpha:d.alpha);e.transform(b)}h._rm_topathPath=f};Raphael.fn.printLetters=function(l,j,h,e,o,d,n,g){d=d||o/1.5;n=n||o;this.setStart();var b=l,k=j;for(var f=0;f<h.length;f++){if(h.charAt(f)!="\n"){var c=this.print(b,k,h.charAt(f),e,o);b+=d}else{b=l;k+=n}}var m=this.setFinish();if(g){a(m,this,g)}return m}})();(function(){Raphael.st._elEquals=function(b,a){return b==a};Raphael.st.contains=function(b){for(var a=0;a<this.length;a++){if(Raphael.st._elEquals(this[a],b)){return true}}return false};Raphael.st.containsAll=function(a){};Raphael.st.intersect=function(a){if(!a){return[]}var b=this.paper.set();for(var c=0;c<this.length;c++){if(a.contains(this[c])){b.push(this[c])}}return b};Raphael.st.add=function(a){if(!a){return this}for(var b=0;b<a.length;b++){if(!this.contains(a[b])){this.push(a[b])}}return this};Raphael.st.substract=function(a){if(!a){return this}for(var b=0;b<a.length;b++){if(this.contains(a[b])){this.exclude(a[b])}}return this};Raphael.st.filter=function(a){var b=this;this.forEach(function(e,d){var c=a(e,d);c=typeof(c)=="object"?(c+"")=="true":c;if(c){b.exclude(e)}return true});return b};Raphael.el.firstShape=function(){return this};Raphael.st.firstShape=function(){var a=null;this.forEach(function(c,b){if(c.type!="set"){a=c;return false}else{a=c.firstShape();if(a==null){return true}else{return false}}});return a};Raphael.st.item=function(b){var c=0;var a=null;this.forEach(function(d){if(c==b){a=d;return false}c++;return true});return a};Raphael.el.print=function(){return this.type?this.type:"undef"};Raphael.st.print=function(){var a="Set(";this.forEach(function(b){a+=b.print()+", "});return a+")"}})();(function(){Raphael.el.isRemoved=function(){return this.node.parentNode==null};Raphael.st.isRemoved=function(){return true}})();(function(){var a=function(d,b){if(d.type=="set"){var c=d;d.forEach(function(f){a(f,b)});return}else{var e=d.attr();e.type=d.type;b.push(e)}};Raphael.el.writeToObject=function(){var b=[];a(this,b);return b};Raphael.el.writeToString=function(){var b=this.writeToObject();var h=[];for(var e=0;e<b.length;e++){var g=b[e],d=[];d.push('"type":"'+g.type+'"');for(var c in g){val=(g[c]+"").replace(/\"/g,'\\"');d.push('"'+c+'":"'+val+'"')}var f="{"+d.join(",")+"}";if(e<b.length-1){f+=","}h.push(f)}return h.join(",")};Raphael.st.writeToObject=function(){var b=[];this.forEach(function(c){b=b.concat(c.writeToObject())});return b};Raphael.st.writeToString=function(){var b=[];this.forEach(function(c){b=b.concat(c.writeToString())});return"["+b.join(",")+"]"};Raphael.fn.writeToObject=function(){var b=[];this.forEach(function(c){b=b.concat(c.writeToObject())});return b};Raphael.fn.writeToString=function(){var b=[];this.forEach(function(c){b=b.concat(c.writeToString())});return"["+b.join(",")+"]"}})();(function(){if(Raphael.vml){var a=/ progid:\S+Blur\([^\)]+\)/g;Raphael.el.blur=function(c){var d=this.node.style,e=d.filter;e=e.replace(a,"");if(c!="none"&&c!=0&&c!="0"){d.filter=e+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+c||1.5)+")";d.margin=Raphael.format("-{0}px 0 0 -{0}px",Math.round(+c||1.5))}else{d.filter=e;d.margin=0}}}else{var b=function(e,c){if(c){for(var d in c){if(c.hasOwnProperty(d)){e.setAttribute(d,c[d])}}}else{return document.createElementNS("http://www.w3.org/2000/svg",e)}};Raphael.el.blur=function(c){if(c!="none"&&c!=0&&c!="0"){var d=b("filter"),e=b("feGaussianBlur");d.id="r"+(Raphael.idGenerator++).toString(36);b(e,{stdDeviation:+c||1.5});d.appendChild(e);this.paper.defs.appendChild(d);this._blur=d;b(this.node,{filter:"url(#"+d.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur}this.node.removeAttribute("filter")}};Raphael.st.blur=function(d){for(var c=0;c<this.items.length;c++){this.items[c].blur(d)}}}})();(function(){if(Raphael.vml){var a=/ progid:\S+Emboss\([^\)]+\)/g;Raphael.el.emboss=function(b){var c=this.node.style,d=c.filter;d=d.replace(a,"");if(b!="none"){c.filter=d+" progid:DXImageTransform.Microsoft.Emboss(bias="+(b||0)+")"}else{c.filter=d}}}else{Raphael.el.emboss=function(b){if(!b||b=="0"){return this.convolveClear(Raphael.el.emboss.EMBOSS_TRANS_NAME)}else{var c=b;var d=[c*-1,0,0,0,1,0,0,0,c];return this.convolve(Raphael.el.emboss.EMBOSS_TRANS_NAME,3,d,1,b,null)}};Raphael.st.emboss=function(b){for(var c=0;c<this.items.length;c++){this.items[c].emboss(b)}};Raphael.el.emboss.EMBOSS_TRANS_NAME="embossTransformation"}})();(function(){if(Raphael.vml){Raphael.el.convolve=function(e,c,g,f,b,d){return this};Raphael.el.convolveClear=function(b){return this}}else{var a=function(d,b){if(b){for(var c in b){if(b.hasOwnProperty(c)){d.setAttribute(c,b[c])}}}else{return document.createElementNS("http://www.w3.org/2000/svg",d)}};Raphael.el.convolve=function(g,e,j,h,d,f){var b={order:e+"",kernelMatrix:j.join(" ")};if(h){b.divisor=h}if(d){b.bias=d}if(f){b.preserveAlpha=f}else{b.preserveAlpha="true"}if(this.mainFilter==null){this.mainFilter=a("filter");this.mainFilter.id="convolutionMainFilter";this.paper.defs.appendChild(this.mainFilter);a(this.node,{filter:"url(#convolutionMainFilter)"})}var c=this._convolutions==null?null:this._convolutions[g];if(c==null){c=a("feConvolveMatrix")}this.mainFilter.appendChild(c);a(c,b);if(!this._convolutions){this._convolutions={}}this._convolutions[g]=c;return this};Raphael.st.convolve=function(f,d,h,g,b,e){for(var c=0;c<this.items.length;c++){this.items[c].convolve(f,d,h,g,b,e)}};Raphael.el.convolveClear=function(c){if(this._convolutions!=null&&this._convolutions[c]!=null&&this.mainFilter!=null){try{this.mainFilter.removeChild(this._convolutions[c]);this._convolutions[c]=null}catch(b){alert("error removing filter for conv named : "+c)}}return this};Raphael.st.convolveClear=function(c){for(var b=0;b<this.items.length;b++){this.items[b].convolveClear(c)}};Raphael.el.convolveClearAll=function(){if(this.mainFilter!=null){this.paper.defs.removeChild(this.mainFilter);this.mainFilter=null;this._convolutions=null;this.node.removeAttribute("filter")}};Raphael.st.convolveClearAll=function(){for(var b=0;b<this.items.length;b++){this.items[b].convolveClearAll()}}}})();(function(){Raphael.el.emboss2=function(d,c,e,b){e=e||1;b=b||100;var a=null;if(c=="north"){a=[-d,0,0,0,1,0,0,0,d]}else{if(c=="north-east"){a=[0,0,d,0,1,0,-d,0,0]}else{if(c=="east"){a=[0,0,0,-d,1,d,0,0,0]}else{if(c=="south-east"){a=[-d,0,0,0,1,0,0,0,d]}else{if(c=="south"){a=[0,-d,0,0,1,0,0,d,0]}else{if(c=="south-west"){a=[0,0,-d,0,1,0,d,0,0]}else{if(c=="west"){a=[0,0,0,d,1,-d,0,0,0]}else{if(c=="north-west"){a=[d,0,0,0,1,0,0,0,-d]}}}}}}}}if(a){this.convolve("prewittCompassGradient1",3,a,e,b)}return this}})();(function(){var a=function(e,g,b){var f=[];for(var d=0;d<g;d++){for(var c=0;c<g;c++){f[d*g+c]=e[d*g+c]*b}}return f};Raphael.el.sobel=function(c,e,d,b){d=d||1;b=b||1;if(c==1){this.convolve("sobel1",3,a([-1,0,+1,-2,0,+2,-1,0,+1],3,e),d,b);this.convolve("sobel2",3,a([+1,+2,+1,0,0,0,-1,-2,-1],3,e),d,b)}else{if(c==2){this.convolve("sobel1",4,a([-1,0,0,1,-2,0,0,2,-2,0,0,2,-1,0,0,1],4,e),d,b);this.convolve("sobel2",4,a([+1,+2,+2,+1,0,0,0,0,0,0,0,0,0,0,0,0,-1,-2,-2,-1],4,e),d,b)}else{if(c==3){this.convolve("sobel1",5,a([-1,0,0,0,1,-2,0,0,0,2,-3,0,0,0,3,-2,0,0,0,2,-1,0,0,0,1],5,e),d,b);this.convolve("sobel2",5,a([+1,+2,+3,+2,+1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-2,-3,-2,-1],5,e),d,b)}else{if(c==4){this.convolve("sobel1",6,a([-1,0,0,0,0,1,-2,0,0,0,0,2,-3,0,0,0,0,3,-3,0,0,0,0,3,-2,0,0,0,0,2,-1,0,0,0,0,1],6,e),d,b);this.convolve("sobel2",6,a([+1,+2,+3,+3,+2,+1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-2,-3,-3,-2,-1],6,e),d,b)}else{if(c==5){this.convolve("sobel1",7,a([-1,0,0,0,0,0,1,-2,0,0,0,0,0,2,-3,0,0,0,0,0,3,-4,0,0,0,0,0,4,-3,0,0,0,0,0,3,-2,0,0,0,0,0,2,-1,0,0,0,0,0,1],7,e),d,b);this.convolve("sobel2",7,a([+1,+2,+3,+4,+3,+2,+1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-2,-3,-4,-3,-2,-1],7,e),d,b)}}}}}return this}})();(function(){if(Raphael.vml){}else{var a=function(d,b){if(b){for(var c in b){if(b.hasOwnProperty(c)){d.setAttribute(c,b[c])}}}else{return document.createElementNS("http://www.w3.org/2000/svg",d)}};Raphael.el.colorMatrix=function(d,b){var e={type:"matrix",values:b.join(" ")};if(this.colorMainFilter==null){this.colorMainFilter=a("filter");this.colorMainFilter.id="colorMainFilter";this.paper.defs.appendChild(this.colorMainFilter);a(this.node,{filter:"url(#colorMainFilter)"})}var c=this._colorFilters==null?null:this._colorFilters[d];if(c==null){c=a("feColorMatrix")}this.colorMainFilter.appendChild(c);a(c,e);if(!this._colorFilters){this._colorFilters={}}this._colorFilters[d]=c;return this};Raphael.st.colorMatrix=function(d,b){for(var c=0;c<this.items.length;c++){this.items[c].colorMatrix(d,b)}};Raphael.el.colorMatrixClear=function(b){if(this._colorFilters!=null&&this._colorFilters[b]!=null&&this.colorMainFilter!=null){try{this.colorMainFilter.removeChild(this._colorFilters[b]);this._colorFilters[b]=null}catch(c){alert("error removing filter for color matrix named : "+b)}}return this};Raphael.el.colorMatrixClearAll=function(){if(this.colorMainFilter!=null){this.paper.defs.removeChild(this.colorMainFilter);this.colorMainFilter=null;this._colorFilters=null;this.node.removeAttribute("filter")}}}})();(function(){if(Raphael.vml){}else{var a=function(d,b){if(b){for(var c in b){if(b.hasOwnProperty(c)){d.setAttribute(c,b[c])}}}else{return document.createElementNS("http://www.w3.org/2000/svg",d)}};Raphael.el.componentTransferLinear=function(e,d){if(this.componentTransfersMainFilter==null){alert("***componentTransfersMainFilter created");this.componentTransfersMainFilter=a("filter");this.componentTransfersMainFilter.id="componentTransfersMainFilter";this.paper.defs.appendChild(this.componentTransfersMainFilter);a(this.node,{filter:"url(#componentTransfersMainFilter)"})}var g=this._componentTransfers==null?null:this._componentTransfers[e],c=null,b=null,f=null;if(g==null){g=a("feComponentTransfer");c=a("feFuncR");b=a("feFuncG");f=a("feFuncB");g.appendChild(c);g.appendChild(b);g.appendChild(f)}else{c=g.childNodes[0];b=g.childNodes[1];f=g.childNodes[2]}a(c,d.funcR);c.setAttribute("type","linear");a(b,d.funcG);b.setAttribute("type","linear");a(f,d.funcB);f.setAttribute("type","linear");this.componentTransfersMainFilter.appendChild(g);if(!this._componentTransfers){this._componentTransfers={}}this._componentTransfers[e]=g;return this};Raphael.st.componentTransferLinear=function(d,b){for(var c=0;c<this.items.length;c++){this.items[c].componentTransferLinear(d,b)}};Raphael.el.componentTransferClear=function(b){if(this._componentTransfers!=null&&this._componentTransfers[b]!=null&&this.componentTransfersMainFilter!=null){try{this.componentTransfersMainFilter.removeChild(this._componentTransfers[b]);this._componentTransfers[b]=null}catch(c){alert("error removing filter for conv named : "+b)}}return this};Raphael.el.componentTransferClearAll=function(){if(this.componentTransfersMainFilter!=null){this.paper.defs.removeChild(this.componentTransfersMainFilter);this.componentTransfersMainFilter=null;this._componentTransfers=null;this.node.removeAttribute("filter")}}}})();(function(){if(Raphael.vml){}else{var a=function(d,b){if(b){for(var c in b){if(b.hasOwnProperty(c)){d.setAttribute(c,b[c])}}}else{return document.createElementNS("http://www.w3.org/2000/svg",d)}};Raphael.el.morphology=function(e,d,b){var f={operator:d,radius:b};if(this.morphologyMainFilter==null){this.morphologyMainFilter=a("filter");this.morphologyMainFilter.id="morphologyMainFilter";this.paper.defs.appendChild(this.morphologyMainFilter);a(this.node,{filter:"url(#morphologyMainFilter)"})}var c=this._morphologyFilters==null?null:this._morphologyFilters[e];if(c==null){c=a("feMorphology")}this.morphologyMainFilter.appendChild(c);a(c,f);if(!this._morphologyFilters){this._morphologyFilters={}}this._morphologyFilters[e]=c;return this};Raphael.el.morphologyClear=function(b){if(this._morphologyFilters!=null&&this._morphologyFilters[b]!=null&&this.morphologyMainFilter!=null){try{this.morphologyMainFilter.removeChild(this._morphologyFilters[b]);this._morphologyFilters[b]=null}catch(c){alert("error removing filter for morphology named : "+b)}}return this};Raphael.el.morphologyClearAll=function(){if(this.morphologyMainFilter!=null){this.paper.defs.removeChild(this.morphologyMainFilter);this.morphologyMainFilter=null;this._morphologyFilters=null;this.node.removeAttribute("filter")}};Raphael.st.morphology=function(e,c,b){for(var d=0;d<this.items.length;d++){this.items[d].morphology(e,c,b)}}}})();(function(b){function c(m){if(typeof m==="number"){return m.toString()}var l={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"};for(var k in l){m=m.replace(new RegExp(k,"g"),"&"+l[k]+";")}return m}function a(n,o){var k=new Array;for(var l in n){if(n.hasOwnProperty(l)){var m=o.call(this,n[l],l);if(m!==null){k.push(m)}}}return k}function d(m,n,k){for(var l in m){if(m.hasOwnProperty(l)){k=n.call(this,k,m[l],l)}}return k}function j(m,l,k,n){if(typeof n==="undefined"||n===null){n=""}if(typeof l==="object"){l=a(l,function(p,o){if(o==="transform"){return}return o+'="'+c(p)+'"'}).join(" ")}return"<"+m+(k?' transform="matrix('+k.toString().replace(/^matrix\(|\)$/g,"")+')" ':" ")+l+">"+n+"</"+m+">"}function g(k){return{font:{family:k.attrs.font.replace(/^.*?"(\w+)".*$/,"$1"),size:typeof k.attrs["font-size"]==="undefined"?null:k.attrs["font-size"]}}}function h(k){return"font: normal normal normal 10px/normal "+k.font.family+(k.font.size===null?"":"; font-size: "+k.font.size+"px")}function e(m,l,k){if(m===null){m=10}return m*4.5/13*(l-0.2-k/2)*3.5}var f={text:function(l){style=g(l);var k=new Array;a(l.attrs.text.split("\n"),function(o,n,m){m=m||0;k.push(j("text",d(l.attrs,function(q,r,p){if(p!=="text"&&p!=="w"&&p!=="h"){if(p==="font-size"){r=r+"px"}q[p]=c(r.toString())}return q},{style:"text-anchor: middle; "+h(style)+";"}),l.matrix,j("tspan",{dy:e(style.font.size,m+1,l.attrs.text.split("\n").length)},null,o)))});return k},path:function(l){var k=(l.matrix.a===1&&l.matrix.d===1)?{}:{transform:l.matrix.toString()};return j("path",d(l.attrs,function(n,o,m){if(m==="path"){m="d"}n[m]=o.toString();return n},{}),l.matrix)}};b.fn.toSVG=function(){var p=this,n={svg:b.svg,vml:b.vml},k='<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+p.width+'" version="1.1" height="'+p.height+'">';b.svg=true;b.vml=false;for(var o=p.bottom;o!=null;o=o.next){if(o.node.style.display==="none"){continue}var m="";if(typeof f[o.type]==="function"){k+=f[o.type](o);continue}switch(o.type){case"image":m+=' preserveAspectRatio="none"';break}for(i in o.attrs){var l=i;switch(i){case"src":l="xlink:href";break;case"transform":l="";break}if(l){m+=" "+l+'="'+c(o.attrs[i].toString())+'"'}}k+="<"+o.type+' transform="matrix('+o.matrix.toString().replace(/^matrix\(|\)$/g,"")+')"'+m+"></"+o.type+">"}k+="</svg>";b.svg=n.svg;b.vml=n.vml;return k}})(window.Raphael);Raphael.fn.importSVGStr=function(a){var b=null;if(window.DOMParser){parser=new DOMParser();b=parser.parseFromString(a,"text/xml")}else{b=new ActiveXObject("Microsoft.XMLDOM");b.async=false;b.loadXML(a)}if(b){return this.importSVG(b)}else{return null}};Raphael.fn.importSVG=function(svgXML){try{var m_myNewSet=this.set();var strSupportedShapes="|rect|circle|ellipse|path|image|text|polygon|";var linGrads=svgXML.getElementsByTagName("linearGradient");var radGrads=svgXML.getElementsByTagName("radialGradient");this.doFill=function(strNode,attr,mNodeName,mNodeValue){if(mNodeValue.indexOf("url")==0){var opacity;var gradID=mNodeValue.substring("url(#".length,mNodeValue.length-1);for(var l=0;l<radGrads.length;l++){if(radGrads.item(l).getAttribute("id")==gradID){var stop1,stop2;for(var st=0;st<radGrads.item(l).childNodes.length;st++){if(radGrads.item(l).childNodes.item(st).nodeName=="stop"){if(stop1){stop2=radGrads.item(l).childNodes.item(st)}else{stop1=radGrads.item(l).childNodes.item(st)}}}if(!stop1){return}if(strNode=="path"){attr[mNodeName]=90+"-"+stop1.getAttribute("stop-color")+"-"+stop2.getAttribute("stop-color")+":50-"+stop1.getAttribute("stop-color")}else{attr[mNodeName]="r("+radGrads.item(l).getAttribute("fx")+","+radGrads.item(l).getAttribute("fx")+")"+stop1.getAttribute("stop-color")+"-"+stop2.getAttribute("stop-color")}if(stop1.getAttribute("stop-opacity")){opacity=stop1.getAttribute("stop-opacity")}}}for(var l=0;l<linGrads.length;l++){if(linGrads.item(l).getAttribute("id")==gradID){var b=parseFloat(linGrads.item(l).getAttribute("y2"))-parseFloat(linGrads.item(l).getAttribute("y1"));var c=parseFloat(linGrads.item(l).getAttribute("x2"))-parseFloat(linGrads.item(l).getAttribute("x1"));var angle=Math.atan(b/c);if(c<0){angle=angle-Math.PI}angle=parseInt(Raphael.deg(angle)+360)%360;var stop1,stop2;for(var st=0;st<linGrads.item(l).childNodes.length;st++){if(linGrads.item(l).childNodes.item(st).nodeName=="stop"){if(stop1){stop2=linGrads.item(l).childNodes.item(st)}else{stop1=linGrads.item(l).childNodes.item(st)}}}if(!stop1){return}attr[mNodeName]=angle+"-"+stop1.getAttribute("stop-color")+"-"+stop2.getAttribute("stop-color")+":50-"+stop1.getAttribute("stop-color");if(stop1.getAttribute("stop-opacity")){opacity=stop1.getAttribute("stop-opacity")}}}if(opacity){attr.opacity=opacity}}else{attr[mNodeName]=mNodeValue}};this.parseElement=function(elShape,myNewSet){var node=elShape.nodeName;if(node=="g"){var groupSet=this.set();for(var o=0;o<elShape.childNodes.length;o++){this.parseElement(elShape.childNodes.item(o),groupSet)}for(var k=0;k<elShape.attributes.length;k++){var m=elShape.attributes[k];if(m.nodeName=="transform"&&groupSet.transform){var actions=m.nodeValue.split(")");for(var a=0;a<actions.length;a++){if(actions[a].indexOf("matrix")==0){groupSet.transform("m"+actions[a].substring(actions[a].indexOf("(")+1))}else{if(actions[a]){eval("groupSet."+actions[a]+")")}}}}else{groupSet.attr(m.nodeName,m.nodeValue)}}myNewSet.push(groupSet);return}if(node&&strSupportedShapes.indexOf("|"+node+"|")>=0){var attr={"stroke-width":0,fill:"#fff"};var shape;var style;var nodeID=elShape.getAttribute("id");m_font="";for(var k=0;k<elShape.attributes.length;k++){var m=elShape.attributes[k];switch(m.nodeName){case"stroke-dasharray":attr[m.nodeName]="- ";break;case"style":style=m.nodeValue.split(";");for(var l=0;l<style.length;l++){if(style[l].split(":")[0]=="fill"){this.doFill(node,attr,style[l].split(":")[0],style[l].split(":")[1])}else{attr[style[l].split(":")[0]]=style[l].split(":")[1]}}break;case"fill":this.doFill(node,attr,m.nodeName,m.nodeValue);break;case"font-size":m_font=m.nodeValue+"px "+m_font;attr[m.nodeName]=m.nodeValue;break;case"font-family":m_font=m_font+'"'+m.nodeValue+'"';break;case"x":case"y":case"cx":case"cy":case"rx":case"ry":attr[m.nodeName]=parseFloat(m.nodeValue);break;case"text-anchor":break;default:attr[m.nodeName]=m.nodeValue;break}}switch(node){case"rect":if(attr.rx){shape=this.rect(attr.x,attr.y,elShape.getAttribute("width"),elShape.getAttribute("height"),attr.rx)}else{shape=this.rect()}break;case"circle":shape=this.ellipse();attr.rx=attr.r;attr.ry=attr.r;break;case"ellipse":shape=this.ellipse();break;case"path":shape=this.path(attr.d);break;case"polygon":var point_string=attr.points.trim();var aryPoints=point_string.split(" ");var strNewPoints="M";for(var i in aryPoints){if(i>0){strNewPoints+="L"}strNewPoints+=aryPoints[i]}strNewPoints+="Z";shape=this.path(strNewPoints);break;case"image":shape=this.image();break;case"text":shape=this.text(attr.x,attr.y,elShape.text||elShape.textContent);shape.attr("font",m_font);shape.attr("stroke","none");shape.origFontPt=parseInt(attr["font-size"]);break}myNewSet.push(shape);shape.attr(attr);for(var k=0;k<elShape.attributes.length;k++){var m=elShape.attributes[k];if(m.nodeName=="transform"&&shape.transform){var actions=m.nodeValue.split(")");for(var a=0;a<actions.length;a++){if(actions[a].indexOf("matrix")==0){shape.transform("m"+actions[a].substring(actions[a].indexOf("(")+1))}else{if(actions[a]){eval("shape."+actions[a]+")")}}}}}}};var elShape;var m_font;var elSVG=svgXML.getElementsByTagName("svg")[0];elSVG.normalize();for(var i=0;i<elSVG.childNodes.length;i++){elShape=elSVG.childNodes.item(i);this.parseElement(elShape,m_myNewSet)}}catch(error){alert("The SVG data you entered was invalid! ("+error+")")}return m_myNewSet};Raphael.fn.freeTransform=function(e,k,h){if(e.freeTransform){return e.freeTransform}if(!("map" in Array.prototype)){Array.prototype.map=function(o,l){var m=new Array();for(var n in this){if(this.hasOwnProperty(n)){m[n]=o.call(l,this[n],n,this)}}return m}}var a=this;var i=e.getBBox(true);var c=e.freeTransform={attrs:{x:i.x,y:i.y,size:{x:i.width,y:i.height},center:{x:i.x+i.width/2,y:i.y+i.height/2},rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},axes:null,bbox:null,callback:null,items:new Array,handles:{center:null,x:null,y:null},offset:{rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},opts:{attrs:{fill:"#000",stroke:"#000"},boundary:{x:a._left?a._left:0,y:a._top?a._top:0,width:a.width,height:a.height},distance:1.2,drag:true,dragRotate:false,dragScale:false,dragSnap:false,dragSnapDist:0,keepRatio:false,rotate:true,rotateRange:[-180,180],rotateSnap:false,rotateSnapDist:0,scale:true,scaleSnap:false,scaleRange:false,showBBox:false,size:5},subject:e};c.updateHandles=function(){if(c.opts.showBBox||c.opts.dragRotate){var n=j()}var m={x:(c.attrs.rotate)*Math.PI/180,y:(c.attrs.rotate+90)*Math.PI/180};var l={x:c.attrs.size.x/2*c.attrs.scale.x,y:c.attrs.size.y/2*c.attrs.scale.y};c.axes.map(function(p){if(c.handles[p]){var o=c.attrs.center.x+c.attrs.translate.x+l[p]*c.opts.distance*Math.cos(m[p]),q=c.attrs.center.y+c.attrs.translate.y+l[p]*c.opts.distance*Math.sin(m[p]);if(c.opts.boundary){o=Math.max(Math.min(o,c.opts.boundary.x+c.opts.boundary.width),c.opts.boundary.x),q=Math.max(Math.min(q,c.opts.boundary.y+c.opts.boundary.height),c.opts.boundary.y)}c.handles[p].disc.attr({cx:o,cy:q});c.handles[p].line.toFront().attr({path:[["M",c.attrs.center.x+c.attrs.translate.x,c.attrs.center.y+c.attrs.translate.y],["L",c.handles[p].disc.attrs.cx,c.handles[p].disc.attrs.cy]]});c.handles[p].disc.toFront()}});if(c.handles.center){c.handles.center.disc.toFront().attr({cx:c.attrs.center.x+c.attrs.translate.x,cy:c.attrs.center.y+c.attrs.translate.y})}if(c.opts.showBBox){c.bbox.toFront().attr({path:[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["L",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[0].x,n[0].y]]})}if(c.opts.dragRotate){var l=Math.max(Math.sqrt(Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2)),Math.sqrt(Math.pow(n[2].x-n[1].x,2)+Math.pow(n[2].y-n[1].y,2)))/2;c.circle.attr({cx:c.attrs.center.x+c.attrs.translate.x,cy:c.attrs.center.y+c.attrs.translate.y,r:l*c.opts.distance})}};c.showHandles=function(){c.hideHandles();if(c.opts.rotate||c.opts.scale){c.axes.map(function(m){c.handles[m]=new Object;c.handles[m].line=a.path(["M",c.attrs.center.x,c.attrs.center.y]).attr({stroke:c.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:0.5});c.handles[m].disc=a.circle(c.attrs.center.x,c.attrs.center.y,c.opts.size).attr(c.opts.attrs)})}if(c.opts.drag){c.handles.center=new Object;c.handles.center.disc=a.circle(c.attrs.center.x,c.attrs.center.y,c.opts.size).attr(c.opts.attrs)}if(c.opts.showBBox){c.bbox=a.path("").attr({stroke:c.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:0.5})}if(c.opts.dragRotate||c.opts.dragScale){c.circle=a.circle(0,0,0).attr({stroke:c.opts.attrs.stroke,"stroke-dasharray":"- ",opacity:0.3})}c.axes.map(function(m){if(!c.handles[m]){return}c.handles[m].disc.drag(function(r,q){if(c.o.viewBoxRatio){r*=c.o.viewBoxRatio.x;q*=c.o.viewBoxRatio.y}var p=r+c.handles[m].disc.ox,t=q+c.handles[m].disc.oy;var s={x:c.o.scale.x<0,y:c.o.scale.y<0};if(c.opts.rotate){var o=Math.atan2(t-c.o.center.y-c.o.translate.y,p-c.o.center.x-c.o.translate.x);c.attrs.rotate=o*180/Math.PI-(m=="y"?90:0);if(s[m]){c.attrs.rotate-=180}}if(c.opts.boundary){p=Math.max(Math.min(p,c.opts.boundary.x+c.opts.boundary.width),c.opts.boundary.x);t=Math.max(Math.min(t,c.opts.boundary.y+c.opts.boundary.height),c.opts.boundary.y)}var n=Math.sqrt(Math.pow(p-c.o.center.x-c.o.translate.x,2)+Math.pow(t-c.o.center.y-c.o.translate.y,2));if(c.opts.scale){c.attrs.scale={x:m=="x"?n/(c.o.size.x/2*c.opts.distance):c.o.scale.x,y:m=="y"?n/(c.o.size.y/2*c.opts.distance):c.o.scale.y};if(s[m]){c.attrs.scale[m]*=-1}}d();if(c.attrs.scale.x&&c.attrs.scale.y){c.apply()}f([c.opts.rotate?"rotate":null,c.opts.scale?"scale":null])},function(){c.o=b(c.attrs);if(a._viewBox){c.o.viewBoxRatio={x:a._viewBox[2]/a.width,y:a._viewBox[3]/a.height}}c.handles[m].disc.ox=this.attrs.cx;c.handles[m].disc.oy=this.attrs.cy;f([c.opts.rotate?"rotate start":null,c.opts.scale?"scale start":null])},function(){f([c.opts.rotate?"rotate end":null,c.opts.scale?"scale end":null])})});if(c.opts.drag){var l=new Array;if(!c.opts.dragRotate&&!c.opts.dragScale){l.push(e)}if(c.handles.center){l.push(c.handles.center.disc)}l.map(function(m){m.drag(function(o,n){if(c.o.viewBoxRatio){o*=c.o.viewBoxRatio.x;n*=c.o.viewBoxRatio.y}c.attrs.translate.x=c.o.translate.x+o;c.attrs.translate.y=c.o.translate.y+n;var p=b(c.o.bbox);p.x+=o;p.y+=n;d(p);c.apply();f(["drag"])},function(){c.o=b(c.attrs);if(c.opts.dragSnap){c.o.bbox=e.getBBox()}if(a._viewBox){c.o.viewBoxRatio={x:a._viewBox[2]/a.width,y:a._viewBox[3]/a.height}}c.axes.map(function(n){if(c.handles[n]){c.handles[n].disc.ox=c.handles[n].disc.attrs.cx;c.handles[n].disc.oy=c.handles[n].disc.attrs.cy}});f(["drag start"])},function(){f(["drag end"])})})}if(c.opts.dragRotate||c.opts.dragScale){e.drag(function(q,p,o,s){if(c.opts.dragRotate){var n=Math.atan2(s-c.o.center.y-c.o.translate.y,o-c.o.center.x-c.o.translate.x);c.attrs.rotate=c.o.rotate+(n*180/Math.PI)-c.o.deg}var r={x:c.o.scale.x<0,y:c.o.scale.y<0};if(c.opts.dragScale){var m=Math.sqrt(Math.pow(o-c.o.center.x-c.o.translate.x,2)+Math.pow(s-c.o.center.y-c.o.translate.y,2));c.attrs.scale.x=c.attrs.scale.y=(r.x?-1:1)*c.o.scale.x+(m-c.o.radius)/(c.o.size.x/2);if(r.x){c.attrs.scale.x*=-1}if(r.y){c.attrs.scale.y*=-1}}d();c.apply();f([c.opts.dragRotate?"rotate":null,c.opts.dragScale?"scale":null])},function(m,n){c.o=b(c.attrs);c.o.deg=Math.atan2(n-c.o.center.y-c.o.translate.y,m-c.o.center.x-c.o.translate.x)*180/Math.PI;c.o.radius=Math.sqrt(Math.pow(m-c.o.center.x-c.o.translate.x,2)+Math.pow(n-c.o.center.y-c.o.translate.y,2));if(a._viewBox){c.o.viewBoxRatio={x:a._viewBox[2]/a.width,y:a._viewBox[3]/a.height}}f([c.opts.dragRotate?"rotate start":null,c.opts.dragScale?"scale start":null])},function(){f([c.opts.dragRotate?"rotate end":null,c.opts.dragScale?"scale end":null])})}c.updateHandles()};c.hideHandles=function(){c.items.map(function(l){l.el.undrag()});if(c.handles.center){c.handles.center.disc.remove();c.handles.center=null}["x","y"].map(function(l){if(c.handles[l]){c.handles[l].disc.remove();c.handles[l].line.remove();c.handles[l]=null}});if(c.bbox){c.bbox.remove();c.bbox=null}if(c.circle){c.circle.remove();c.circle=null}};c.setOpts=function(l,n){c.callback=typeof n=="function"?n:false;for(var m in l){c.opts[m]=l[m]}if(!c.opts.scale){c.opts.keepRatio=true}c.axes=c.opts.keepRatio?["y"]:["x","y"];if(!c.opts.dragSnapDist){c.opts.dragSnapDist=c.opts.dragSnap}if(!c.opts.rotateSnapDist){c.opts.rotateSnapDist=c.opts.rotateSnap}c.opts.rotateRange=[parseInt(c.opts.rotateRange[0]),parseInt(c.opts.rotateRange[1])];c.showHandles();f(["init"])};c.setOpts(k,h);c.apply=function(){c.items.map(function(o,n){var l={x:c.attrs.center.x+c.offset.translate.x,y:c.attrs.center.y+c.offset.translate.y},m=c.attrs.rotate-c.offset.rotate;scale={x:c.attrs.scale.x/c.offset.scale.x,y:c.attrs.scale.y/c.offset.scale.y},translate={x:c.attrs.translate.x-c.offset.translate.x,y:c.attrs.translate.y-c.offset.translate.y};o.el.transform(["R",m,l.x,l.y,"S",scale.x,scale.y,l.x,l.y,"T",translate.x,translate.y]+c.items[n].transformString)});c.updateHandles()};c.unplug=function(){var l=c.attrs;c.hideHandles();delete e.freeTransform;return l};(e.type=="set"?e.items:[e]).map(function(l){c.items.push({el:l,attrs:{rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}},transformString:l.matrix.toTransformString()})});c.items.map(function(m,l){if(m.el._&&m.el._.transform){m.el._.transform.map(function(n){if(n[0]){switch(n[0].toUpperCase()){case"T":c.items[l].attrs.translate.x+=n[1];c.items[l].attrs.translate.y+=n[2];break;case"S":c.items[l].attrs.scale.x*=n[1];c.items[l].attrs.scale.y*=n[2];break;case"R":c.items[l].attrs.rotate+=n[1];break}}})}});if(e.type!="set"){c.attrs.rotate=c.items[0].attrs.rotate;c.attrs.scale=c.items[0].attrs.scale;c.attrs.translate=c.items[0].attrs.translate;c.items[0].attrs={rotate:0,scale:{x:1,y:1},translate:{x:0,y:0}};c.items[0].transformString=""}function j(){var m={x:(c.attrs.rotate)*Math.PI/180,y:(c.attrs.rotate+90)*Math.PI/180};var l={x:c.attrs.size.x/2*c.attrs.scale.x,y:c.attrs.size.y/2*c.attrs.scale.y};var o=new Array,n=[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}];n.map(function(p){o.push({x:(c.attrs.center.x+c.attrs.translate.x+p.x*l.x*Math.cos(m.x))+p.y*l.y*Math.cos(m.y),y:(c.attrs.center.y+c.attrs.translate.y+p.x*l.x*Math.sin(m.x))+p.y*l.y*Math.sin(m.y)})});return o}function d(q){if(q&&c.opts.dragSnap){var n=q.x,r=q.y,p={x:0,y:0},m={x:0,y:0};[0,1].map(function(){p.x=n-Math.round(n/c.opts.dragSnap)*c.opts.dragSnap;p.y=r-Math.round(r/c.opts.dragSnap)*c.opts.dragSnap;if(Math.abs(p.x)<=c.opts.dragSnapDist){m.x=p.x}if(Math.abs(p.y)<=c.opts.dragSnapDist){m.y=p.y}n+=q.width-m.x;r+=q.height-m.y});c.attrs.translate.x-=m.x;c.attrs.translate.y-=m.y}if(c.opts.boundary){var l=c.opts.boundary;if(c.attrs.center.x+c.attrs.translate.x<l.x){c.attrs.translate.x+=l.x-(c.attrs.center.x+c.attrs.translate.x)}if(c.attrs.center.y+c.attrs.translate.y<l.y){c.attrs.translate.y+=l.y-(c.attrs.center.y+c.attrs.translate.y)}if(c.attrs.center.x+c.attrs.translate.x>l.x+l.width){c.attrs.translate.x+=l.x+l.width-(c.attrs.center.x+c.attrs.translate.x)}if(c.attrs.center.y+c.attrs.translate.y>l.y+l.height){c.attrs.translate.y+=l.y+l.height-(c.attrs.center.y+c.attrs.translate.y)}}if(c.opts.keepRatio){c.attrs.scale.x=c.attrs.scale.y}var p=Math.abs(c.attrs.rotate%c.opts.rotateSnap);p=Math.min(p,c.opts.rotateSnap-p);if(p<c.opts.rotateSnapDist){c.attrs.rotate=Math.round(c.attrs.rotate/c.opts.rotateSnap)*c.opts.rotateSnap}if(c.opts.scaleSnap){c.attrs.scale.x=Math.round(c.attrs.scale.x*c.attrs.size.x/c.opts.scaleSnap)*c.opts.scaleSnap/c.attrs.size.x;c.attrs.scale.y=Math.round(c.attrs.scale.y*c.attrs.size.y/c.opts.scaleSnap)*c.opts.scaleSnap/c.attrs.size.y}if(c.opts.rotateRange){var o=(360+c.attrs.rotate)%360;if(o>180){o-=360}if(o<c.opts.rotateRange[0]){c.attrs.rotate+=c.opts.rotateRange[0]-o}if(o>c.opts.rotateRange[1]){c.attrs.rotate+=c.opts.rotateRange[1]-o}}if(c.opts.scaleRange){}}function b(m){var n=new Object;for(var l in m){n[l]=typeof m[l]=="object"?b(m[l]):m[l]}return n}var g=false;function f(m){if(c.callback){var l=new Array();m.map(function(o,n){if(o){l.push(o)}});clearTimeout(g);setTimeout(function(){if(c.callback){c.callback(c,l)}},1)}}c.updateHandles();return c};/**
 * native javascript for raphael4gwt
 * @author sgurin
 */

(function(){

window.r4g = {
	
_firebug : function() {
	debugger;
},		
_castToBoolean : function(o) {
	if(typeof(o)=="object")
		return (o+"")=="true";
	else
		return o;
},

dump : function(o, wVal) {
	var s = "{";
	for(var i in o) {
		if(wVal) {
			s+=i+": "+o[i]+", ";
		}
		else {
			s+=i+", ";
		}
	}
	return s+"}";
},	

_isPointInside : function (r,x,y) {
	return x>r.x && x<r.x+r.width && 
		y>r.y && y<r.y+r.height;
},
			
	
/** taken from http://benalman.com/projects/jquery-throttle-debounce-plugin/ */
function_throttle : function( delay, no_trailing, callback, debounce_mode ) {
    // After wrapper has stopped being called, this timeout ensures that
    // `callback` is executed at the proper times in `throttle` and `end`
    // debounce modes.
    var timeout_id,
      
      // Keep track of the last time `callback` was executed.
      last_exec = 0;
    
    // `no_trailing` defaults to falsy.
    if ( typeof no_trailing !== 'boolean' ) {
      debounce_mode = callback;
      callback = no_trailing;
      no_trailing = undefined;
    }
    
    // The `wrapper` function encapsulates all of the throttling / debouncing
    // functionality and when executed will limit the rate at which `callback`
    // is executed.
    function wrapper() {
      var that = this,
        elapsed = +new Date() - last_exec,
        args = arguments;
      
      // Execute `callback` and update the `last_exec` timestamp.
      function exec() {
        last_exec = +new Date();
        callback.apply( that, args );
      };
      
      // If `debounce_mode` is true (at_begin) this is used to clear the flag
      // to allow future `callback` executions.
      function clear() {
        timeout_id = undefined;
      };
      
      if ( debounce_mode && !timeout_id ) {
        // Since `wrapper` is being called for the first time and
        // `debounce_mode` is true (at_begin), execute `callback`.
        exec();
      }
      
      // Clear any existing timeout.
      timeout_id && clearTimeout( timeout_id );
      
      if ( debounce_mode === undefined && elapsed > delay ) {
        // In throttle mode, if `delay` time has been exceeded, execute
        // `callback`.
        exec();
        
      } else if ( no_trailing !== true ) {
        // In trailing throttle mode, since `delay` time has not been
        // exceeded, schedule `callback` to execute `delay` ms after most
        // recent execution.
        // 
        // If `debounce_mode` is true (at_begin), schedule `clear` to execute
        // after `delay` ms.
        // 
        // If `debounce_mode` is false (at end), schedule `callback` to
        // execute after `delay` ms.
        timeout_id = setTimeout( debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay );
      }
    };
    
//    // Set the guid of `wrapper` function to the same of original callback, so
//    // it can be removed in jQuery 1.4+ .unbind or .die by using the original
//    // callback as a reference.
//    if ( $.guid ) {
//      wrapper.guid = callback.guid = callback.guid || $.guid++;
//    }
    
    // Return the wrapper function.
    return wrapper;
  },
  
  
  "":""
	  
}

})();